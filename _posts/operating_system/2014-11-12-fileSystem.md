---
layout: post
title: 文件系统相关
categories: os
description: 文件系统相关
keywords: os
---

### 计算机启动过程 
a.BIOS加电自检 FFFF:0000H跳转指令，rom 自检  
b.读MBR。BIOS检查正常，加载MBR到0000:7C00H 处，检查MBR结束标志是否55AA，如果是启动，不是换依次检查别的设备  
c.启动设备的MBR将自己复制到0000:0600H处, 然后继续执行。根据MBR中的引导代码启动引导程序。
   
### grub如何找到widnows,linux的?
mbr(stage1)->(stage1.5)加载文件系统驱动->stage2->内核  
grub如何找到/boot/grub中的文件的？  
bios引导mbr上的grub stage1 ，  
stage1调用bios读取写在/boot分区pbr上的stage1.5，  
stage1.5里包含/boot分区所用文件系统的驱动，进而读取stage2，  
stage2是grub的主程序，包含grub的大部分功能。  
 
dmesg可以查看本次启动的相关信息  
init是linux的第一个进程，是所有进程的父进程，调用/etc/rc.d/rc.sysinit负责对系统进行初始化，挂载文件系统  
并根据运行级别启动相应服务    
/etc/initab 默认的运行级别  
runlevel 显示上一个运行级别 和当前运行级别  
init 切换当前运行级别  
单用户模式 修改用户密码，在grub选择启动系统之前，e，编辑grub.cfg 加个 1 或者single即进入单用户模式，  
不需要密码以root用户进入系统，通过passwd修改密码  
分区级别的加密    

### 磁盘分区表
1.mbr: 446:"主引导记录"（MBR）,16*4 = 64:磁盘分区表(DPT),所以最多四个主分区,其中可以有一个作为扩展分区.  
mbr为什么不存在0,0,0而是存储在0,0,1扇区呢?????  
2.DPT表项(16字节):是否活动分区,开始及结束的磁盘,柱面,扇区号,首扇区的相对扇区号,总的扇区数  
3.扩展分区扩展出逻辑分区:扩展分区中逻辑驱动器的引导记录是链式的。每一个逻辑分区都有一个和MBR结构类似的扩展引导记录(EBR)，  其分区表的第一项指向该逻辑分区本身的引导扇区，第二项指向下一个逻辑驱动器的EBR，分区表第三、第四项没有用到。  
4.盘符——是软件级的概念；分区——是硬件级的概念；   
磁头(磁面)>磁道(柱面)>扇区
  

